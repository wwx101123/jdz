<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="__WCSS__/base.css">
    <link rel="stylesheet" type="text/css" href="__WCSS__/comment/questionList.css">
    <script type="text/javascript" src="__WJS__/reset.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
    <script type="text/javascript" src="__WJS__/comment/bscroll.min.js"></script>
    <title>问题列表</title>
    <style>
    @font-face {
        font-family: 'iconfont';  /* project id 803693 */
        src: url('//at.alicdn.com/t/font_803693_utrulktu2oa.eot');
        src: url('//at.alicdn.com/t/font_803693_utrulktu2oa.eot?#iefix') format('embedded-opentype'),
        url('//at.alicdn.com/t/font_803693_utrulktu2oa.woff') format('woff'),
        url('//at.alicdn.com/t/font_803693_utrulktu2oa.ttf') format('truetype'),
        url('//at.alicdn.com/t/font_803693_utrulktu2oa.svg#iconfont') format('svg');
    }
    .iconfont {
        font-family:"iconfont" !important;
        font-style:normal;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
</style>
</head>
<body>
    <div class="wrap"  id="app">
        <!-- 头部 -->
        <div class="header" ref="header">
            <div class="search-wrap">
                <div class="left-input" @click="handelToSearch">
                    <i class="iconfont">&#xe609;</i>
                    <p>搜索</p>
                </div>
                <div class="right-question" @click="handelToReport">
                    <i class="iconfont">&#xe669;</i>
                    <p>提问</p>
                </div>
            </div>
        </div>
        <!-- 内容列表 -->
        <div class="main wrapper" ref="wrapper" :style="{ height: scrollHeight +'px'}">
            <volist name="questionArr" id="vo">
                <ul class="list" >
                    <li class="item"  @click="handelToQuestion">
                        <h3 class="item-title">{$vo.title}</h3>
                        <div class="item-con">
                            <p class="mesg">{$vo.title}{$vo.title}{$vo.title}</p>
                            <img src="{$vo.thumbnail}" alt="">
                        </div>
                        <p class="item-agree">{$vo.pv}赞同</p>
                    </li>
                </ul>

            </volist>
            <ul class="list" >
                <li class="item" v-for="item in questionList" @click="handelToQuestion">
                    <h3 class="item-title">{{item.title}}</h3>
                    <div class="item-con">
                        <p class="mesg">{{item.mesg}}</p>
                        <img v-if="item.imgSrc" :src="item.imgSrc" alt="">
                    </div>
                    <p class="item-agree">{{item.agreeNum}}赞同</p>
                </li>
            </ul>
            <ul class="list" >
                <li class="item" v-for="item in questionList" @click="handelToQuestion">
                    <h3 class="item-title">{{item.title}}</h3>
                    <div class="item-con">
                        <p class="mesg">{{item.mesg}}</p>
                        <img v-if="item.imgSrc" :src="item.imgSrc" alt="">
                    </div>
                    <p class="item-agree">{{item.agreeNum}}赞同</p>
                </li>
            </ul>
        </div>

        <!-- 个人中心 -->
        <div class="center" @click="handelToCenter">我的</div>
    </div>
    <script>
       var vm = new Vue({
            el: '#app',
            data: {
                questionList:[
                    {
                        id:0,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        // imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        // imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        // imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        // imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    },{
                        id:1,
                        title:'有什么是你去北京必须知道的事?',
                        mesg: '有什么是你去北京必须知道的事,有什么是你去北京必须知道的事,有什么是你去北京必须知道的事',
                        // imgSrc:'http://f.hiphotos.baidu.com/image/pic/item/fc1f4134970a304e48f0a9dfdcc8a786c8175cc0.jpg',
                        agreeNum: 1222,
                    }
                ],
            },
            computed:{
                scrollHeight:function(){
                    let header = $(".header").height();
                    let con = $(window).height();
                    let l = con - header;
                    return l;
                }
            },
            mounted(){
                   this.loadData();
            },
            methods: {
                loadData() {
                    // requestData().then((res) => {
                    // this.data = res.data.concat(this.data)
                    this.$nextTick(() => {
                        if (!this.scroll) {
                            this.scroll = new BScroll(this.$refs.wrapper, {
                                click:true,
                                // scrollY: true,
                                /* 上拉加载 */
                                pullUpLoad: {
                                    threshold: -30 
                                },
                                pullDownRefresh: {
                                    threshold: 30, // 下拉距离超过30px触发pullingDown事件
                                } 
                            })
                            /* 上拉加载 */
                            this.scroll.on('pullingUp', (e) => {
                                console.log("上拉加载");
                                this.scroll.finishPullUp();
                            })
                            this.scroll.on('pullingDown', (e) => {
                                console.log("下拉刷新");
                                this.scroll.finishPullDown()
                            })
                        }
                    })
                    // })
                },
                /* 搜索 */
                handelToSearch(e){
                    location.href = "./search.html";
                },
                /* 提问 */
                handelToReport(e){
                    location.href = "./report.html";
                },
                /* 到详情页 */
                handelToQuestion(){
                    location.href = "./question.html";
                },
                /* 到个人中心 */
                handelToCenter(){
                    location.href = "./center.html";
                }   
            }
        })
    </script>
</body>
</html>